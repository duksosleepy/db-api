DATABASE_URL=postgresql://user:password@host:port/dbname?sslmode=prefer

CREATE INDEX product_embeddings_ivfflat_idx ON public.product_embeddings USING ivfflat (embedding vector_l2_ops) WITH (lists = 12);

EXPLAIN ANALYZE SELECT id, name FROM public.product_embeddings ORDER BY embedding <-> '[-0.07120627,0.089591905,-0.045915205,0.0017823186,-0.0045417673,0.005351275,0.114862636,0.07542983,-0.0058715963,0.005051106,0.025174197,-0.07577432,0.019162089,-0.0048776246,0.01641878,-0.039533097,-0.018028297,0.0010188633,0.021158874,-0.05083925,-0.04231676,-0.026469415,0.032156065,0.021550192,-0.08896058,0.019984923,0.051445406,0.0035185404,0.018419378,-0.04446897,0.015867397,0.059631336,0.1415534,0.008778555,-0.030384568,-0.058803286,-0.021345695,-0.013590762,0.0148591725,0.06138383,-0.019804591,-0.11384844,-0.094138205,-0.04971776,0.007957072,0.017984759,0.0060658916,0.08357611,-0.033770878,0.09717954,0.05546586,-0.003050556,-0.06158734,-0.003070653,0.03672343,0.07735853,-0.042316295,0.023429979,-0.00029337566,-0.045372862,0.0547662,0.024489129,-0.12940425,0.037025105,0.0640798,0.002552607,0.0019890165,0.044913206,-0.015386676,0.015088731,0.09278771,0.010939162,-0.0017614921,0.08073812,-0.04563295,0.08301387,0.09023676,-0.04302205,-0.039022304,-0.0058333785,-0.031479053,0.009769741,-0.049379066,-0.030470984,-0.033832375,0.053379513,-0.007596996,0.0018446501,-0.041607253,-0.026708556,0.030077286,0.07143175,0.012869503,-0.067301996,-0.0012352808,0.04306124,-0.01081405,0.04476896,0.0009615729,0.084075004,0.048957165,0.036436677,0.045856558,0.0703956,-0.093967535,-0.065796226,-0.0307454,0.0391924,0.090650454,0.01595903,-0.089280695,-0.018077437,-0.051636744,-0.053566527,-0.037510123,-0.073291555,0.0201332,0.054142755,0.030706119,0.023207597,0.005731789,-0.036730513,-0.114648774,0.00086021004,-0.0011571225,-0.08127268,0.03827134,4.8433387e-33,0.007568572,0.03189414,-0.06130335,0.007080569,0.026513312,0.011344201,-0.003633558,-0.12634215,0.0077429023,0.046739805,-0.057995986,0.008436004,-0.03923818,0.03841232,0.01668766,0.081695095,-0.011595905,-0.05312451,-0.079883404,-0.00097466435,-0.03921148,0.00899544,-0.007066631,0.02585441,-0.071720235,0.02529576,0.017201647,-0.064164706,0.019778274,0.0046286294,0.054530792,0.01409664,0.014514181,0.03213521,-0.12883374,-0.0458422,-0.046756376,-0.05124101,0.021933662,0.00460536,0.07401037,0.0035598448,0.032004844,0.103712074,0.015738184,-0.022749355,0.06983897,0.014206626,0.06308053,0.03407818,-0.028058883,-0.06657603,-0.05000061,-0.07155602,0.043623284,-0.071633294,-0.04030784,0.039191663,-0.008807657,-0.018734865,0.068511486,-0.010565331,0.061880615,0.002465186,-0.04257725,-0.044689093,-0.038088318,-0.117003135,0.05324634,-0.10201941,-0.035535645,0.0041370713,0.06971456,0.042924404,0.0089798,0.024439078,0.088232115,-0.011676172,-0.035043348,0.0009519467,-0.06993488,0.047056664,-0.02088694,0.049637396,0.085559234,0.017591631,0.009717111,-0.10453131,-0.0033526258,0.012219353,0.0153848585,0.0056219436,-0.07399324,-0.047678933,0.047842443,-4.7818302e-33,0.09417276,0.010045786,-0.012611258,0.07987949,-0.013401998,0.015815228,0.017583562,0.08271679,-0.036359552,0.04115677,0.08316323,-0.023387404,-0.014334865,-0.02703501,0.059032694,0.05492219,0.19002421,0.05996455,-0.045258082,-0.026910188,-0.053602744,0.049246617,-0.022664567,0.005133668,-0.033158116,-0.0056013833,0.06841646,-0.02263558,-0.08557626,-0.043609668,-0.046665695,-0.016969847,0.007812617,0.16579404,0.010303004,-0.045467034,0.10639018,0.037865855,-0.04837963,0.022019718,0.009314136,0.028524343,0.034798563,0.045731317,-0.039972864,-0.1767088,-0.022095889,-0.053888924,-0.0050239884,-0.012717779,0.088225506,-0.01899281,0.042345263,-0.014911898,0.0357021,0.0266191,-0.01782214,0.018644022,-0.03451493,0.027669303,0.03162642,0.035966784,-0.019298404,-0.03407305,0.024637206,0.028361298,-0.0049693687,0.0057993196,-0.047191534,-0.014219925,0.0021347369,-0.113146916,-0.037010945,-0.020832846,-0.06566605,-0.09659729,-0.03369003,0.0878397,0.005474888,0.009813723,-0.049218442,-0.019599782,-0.057721,0.038786918,0.005628046,0.06540148,-0.04056748,0.053550366,0.06991089,-0.010371514,-0.01881637,0.100447744,0.0530197,0.043963738,0.037694823,-2.755225e-08,0.0020612064,-0.03553365,-0.01816086,0.037687086,0.10661258,0.042505495,-0.02578653,-0.13423495,-0.030943923,-0.0030919649,-0.030660208,-0.052343477,-0.059504457,0.0036219237,-0.018305711,-0.005566113,-0.057095952,0.07191167,-0.06989343,-0.09554479,-0.026327996,0.011982582,-0.0006842429,-0.011796407,0.014614804,-0.02826082,0.016996482,0.06083462,0.03677039,0.0057444796,0.0041946187,-0.022561863,0.016108818,-0.03245334,0.022357685,-0.00956421,0.06770972,-0.016826032,-0.022931993,-0.026607959,-0.0077964426,-0.031678166,0.04674753,0.05148764,0.035779607,-0.06306272,-0.048566144,-0.024927892,-0.019282117,-0.06758792,0.009567913,-0.025291149,-0.03956678,0.039915167,-0.0663848,-0.027317071,0.0202755,0.02269892,-0.0009594942,0.07481079,-0.016148077,-0.031546067,-0.111540005,-0.062611]' LIMIT 5;
